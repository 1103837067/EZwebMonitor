# EZwebMonitor
æžç®€çš„ FPS + å†…å­˜ å®žæ—¶ç›‘æŽ§æ‚¬æµ®å±‚ï¼ˆæ·±è‰²ã€å¯æ‹–æ‹½ï¼‰ã€‚
æ”¯æŒ R/S é‡‡æ ·åˆ‡æ¢ã€5s/10s/15s çª—å£åˆ‡æ¢ã€CSV è®°å½•å¯¼å‡ºã€åŠ¨æ€çºµè½´ï¼ˆÂ±10%ï¼‰ã€å¹³æ»‘ç¼©æ”¾åŠ¨ç”»ã€Hover æç¤ºï¼Œå…³é—­åŽå®Œå…¨æ¸…ç†ä¸ç•™ç—•ã€‚

> é€‚ç”¨äºŽä¸´æ—¶åœ¨ä»»æ„ç½‘é¡µä¸ŠæŸ¥çœ‹æ€§èƒ½æŒ‡æ ‡ã€æŠ“æ•°æ®å›žæ”¾ã€‚
## usage ä½¿ç”¨æ–¹æ³•
åœ¨æµè§ˆå™¨æŽ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤
``` javascript
import("https://cdn.jsdelivr.net/gh/1103837067/EZwebMonitor/index.js");
// å…³é—­UIåŽå¯ä½¿ç”¨ä¸‹é¢å‘½ä»¤é‡æ–°æ‰“å¼€UIé¢æ¿ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·ç²˜è´´ï¼Œæ¯æ¬¡éƒ½ä¼šæ˜¾ç¤ºUI
window.__EZwebMonitorBootstrap();
```
## âš™ï¸ å…¨å±€å¯¹è±¡

æ‰€æœ‰åŠŸèƒ½éƒ½æŒ‚è½½åœ¨ï¼š
``` javascript
window.__perfOverlay
```

ä»¥åŠè¾…åŠ©å¯åŠ¨å‡½æ•°ï¼š
``` javascript
window.__EZwebMonitorBootstrap()
```
## ðŸ§  APIä¸€è§ˆ
| æ–¹æ³•                                | åŠŸèƒ½è¯´æ˜Ž                        |
| --------------------------------- | --------------------------- |
| `__perfOverlay.remove()`          | ç§»é™¤æµ®å±‚å¹¶æ¸…ç†æ‰€æœ‰äº‹ä»¶/å¾ªçŽ¯ã€‚             |
| `__perfOverlay.reload()`          | é‡æ–°åˆ›å»ºæµ®å±‚ï¼ˆæ— éœ€å†æ¬¡ importï¼‰ã€‚        |
| `__EZwebMonitorBootstrap()`       | ä¸Ž `reload()` ç­‰ä»·ï¼Œæ‰‹åŠ¨å¯åŠ¨ç›‘æŽ§ã€‚     |
| `__perfOverlay.toggleRate()`      | åˆ‡æ¢é‡‡æ ·é€ŸçŽ‡æ¨¡å¼ï¼š`R`ï¼ˆå®žæ—¶ï¼‰ â†” `S`ï¼ˆæ¯ç§’ï¼‰ã€‚ |
| `__perfOverlay.toggleWindow()`    | åˆ‡æ¢æ˜¾ç¤ºæ—¶é—´çª—å£ï¼š5s â†’ 10s â†’ 15s å¾ªçŽ¯ã€‚ |
| `__perfOverlay.start()`           | å¼€å§‹è®°å½•æ€§èƒ½æ•°æ®ã€‚                   |
| `__perfOverlay.stopAndDownload()` | ç»“æŸè®°å½•å¹¶å¯¼å‡º CSV æ–‡ä»¶ã€‚             |
| `__perfOverlay.getJankConfig()`   | æŸ¥çœ‹å½“å‰ jank æ£€æµ‹é˜ˆå€¼ï¼ˆPerfDog é£Žæ ¼ï¼‰ã€‚ |

## ðŸ§¾ å¯¼å‡º CSV å­—æ®µ

æ¯æ¡è®°å½•åŒ…å«ä»¥ä¸‹åˆ—ï¼š
| åˆ—å              | è¯´æ˜Ž             |
| --------------- | -------------- |
| `timestamp_iso` | æ—¶é—´æˆ³ï¼ˆISO æ ¼å¼ï¼‰    |
| `elapsed_ms`    | è¿è¡Œæ—¶é—´ï¼ˆç›¸å¯¹èµ·ç‚¹ï¼‰     |
| `fps`           | å½“å‰å¸§çŽ‡           |
| `memory_mb`     | å†…å­˜ï¼ˆMBï¼‰         |
| `jank`          | å¡é¡¿äº‹ä»¶ï¼ˆ1=æ˜¯ï¼Œ0=å¦ï¼‰  |
| `big_jank`      | å¤§å¡é¡¿äº‹ä»¶ï¼ˆ1=æ˜¯ï¼Œ0=å¦ï¼‰ |
| `delta_ms`      | å½“å‰å¸§è€—æ—¶ï¼ˆmsï¼‰      |


> ç§»åŠ¨ç«¯æ”¯æŒ Web Share APIï¼šå¯¼å‡ºæ—¶ä¼šå¼¹å‡ºâ€œä¿å­˜/åˆ†äº«â€é¢æ¿ï¼›
è‹¥æµè§ˆå™¨ä¸æ”¯æŒï¼Œä¼šè‡ªåŠ¨åˆ‡æ¢ä¸ºä¸‹è½½æˆ–å¤åˆ¶åˆ°å‰ªè´´æ¿ã€‚
---
### ðŸ“Š Jank æ£€æµ‹ç®—æ³•ï¼ˆPerfDog é£Žæ ¼ï¼‰

å®šä¹‰åŸºäºŽè¿žç»­å¸§è€—æ—¶ï¼ˆdelta_ms = ts_now - ts_prevï¼‰ï¼š

- Jankï¼š æ»¡è¶³

    å½“å‰å¸§è€—æ—¶ > å‰ 3 å¸§å¹³å‡çš„ 2 å€

    å½“å‰å¸§è€—æ—¶ > 2 Ã— (1000/24) â‰ˆ 83.3ms

- Big Jankï¼š æ»¡è¶³

    å½“å‰å¸§è€—æ—¶ > å‰ 3 å¸§å¹³å‡çš„ 2 å€

    å½“å‰å¸§è€—æ—¶ > 3 Ã— (1000/24) = 125ms

> å½“æ ‡ç­¾é¡µå¤„äºŽåŽå°æˆ–å¸§é—´éš” > 2000ms æ—¶ï¼Œå¿½ç•¥è¯¥æ ·æœ¬ï¼ˆé˜²è¯¯æŠ¥ï¼‰ã€‚